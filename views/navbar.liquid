{% block content %}
{%- comment -%} A function to make elements toggle the display of other elements {%- endcomment -%}
<script>
function toggleDisplay(id) {
   let isDisplayNone = document.getElementById(id).style.display === "none"
   document.getElementById(id).style.display = isDisplayNone ? "flex" : "none"
}
</script>

<nav class="navbar navbar-expand-md navbar-dark fixed-top">
    <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navCollapse" aria-controls="navCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <img src="https://i.imgur.com/cg6rOb0.png" style="height: 30px">
        </button>
        <a href="/" class="navbar-brand">setList</a>
        {% if session.loggedIn %}
            <img id="user-image" onclick="toggleDisplay('user-menu')" alt="user image" title="user menu" class="me-4" style="height: 40px; border-radius: 50%" src="
            {% if session.userImg and session.userImg != "" %}
                {{session.userImg}}
            {% else %}
                https://i.imgur.com/OUa7lxr.png
            {% endif %}
            ">


            {% if session.groupImg and session.groupImg != "" %}
                <a href="/groups/{{session.groupId}}"><img src="{{session.groupImg}}" alt="{{session.groupName}} logo" title="group menu" style="height: 40px; border-radius: 50%"></a>
            {% else if session.groupId %}
                <a href="/groups/{{session.groupId}}" class="nav-link text-light" title="group menu">{{session.groupName}}</a>
            {% endif %}


        {% endif %}
        <div class="collapse navbar-collapse justify-content-end" id="navCollapse">
            {% if session.loggedIn %}
                {% if session.groupId %}
                    <a href="/songs/new" class="nav-link text-light">New Song</a>
                    <a href="/lists/new" class="nav-link text-light">New List</a>
                    <a href="/songs" class="nav-link text-light">All Songs</a>                    
                    <a href="/lists" class="nav-link text-light">All Lists</a>                    
                {% endif %}               
            {% else %}
                <a href="/user/signup" class="nav-link text-light">Sign Up</a>
                <a href="/user/login" class="nav-link text-light">Log In</a>
            {% endif %}
        </div>
    </div>
</nav>
<div id="user-menu" style="display: none">
    <a href="/user/edit/{{session.userId}}" class="nav-link text-light mt-3">Edit Profile</a> 
    <a href="/groups" class="nav-link text-light mt-3">Your Groups</a>                 
    <a href="/groups/new" class="nav-link text-light mt-3">New Group</a>
    <a href="/user/logout" class="nav-link text-light mt-3">Log Out</a> 
</div>
{% endblock %}